import{_ as s,c as e,o as i,ag as o}from"./chunks/framework.CkHWihve.js";const u=JSON.parse('{"title":"Criar um plug-in","description":"","frontmatter":{},"headers":[],"relativePath":"pt-br/plugins/create.md","filePath":"pt-br/plugins/create.md","lastUpdated":1704804447000}'),n={name:"pt-br/plugins/create.md"};function t(l,a,p,d,r,h){return i(),e("div",null,a[0]||(a[0]=[o(`<h1 id="criar-um-plug-in" tabindex="-1">Criar um plug-in <a class="header-anchor" href="#criar-um-plug-in" aria-label="Permalink to &quot;Criar um plug-in&quot;">​</a></h1><blockquote><p>Hi, we&#39;ve recently migrated our docs and added some new pages. If you would like to help translate this page, see the &quot;Edit this page&quot; link at the bottom of the page.</p></blockquote><h2 id="o-que-ha-em-um-plug-in" tabindex="-1">O que há em um plug-in <a class="header-anchor" href="#o-que-ha-em-um-plug-in" aria-label="Permalink to &quot;O que há em um plug-in&quot;">​</a></h2><p>Um plugin é um repositório git, com alguns scripts executáveis, para dar suporte ao versionamento de outra linguagem ou ferramenta. Esses scripts são executados quando os comandos <code>list-all</code>, <code>install</code> ou <code>uninstall</code> são executados. Você pode definir ou desmarcar env vars e fazer qualquer coisa necessária para configurar o ambiente para a ferramenta.</p><h2 id="scripts-obrigatorios" tabindex="-1">Scripts obrigatórios <a class="header-anchor" href="#scripts-obrigatorios" aria-label="Permalink to &quot;Scripts obrigatórios&quot;">​</a></h2><ul><li><code>bin/list-all</code> - lista todas as versões instaláveis</li><li><code>bin/download</code> - baixe o código fonte ou binário para a versão especificada</li><li><code>bin/install</code> - instala a versão especificada</li></ul><h2 id="variaveis-de-ambiente" tabindex="-1">Variavéis de Ambiente <a class="header-anchor" href="#variaveis-de-ambiente" aria-label="Permalink to &quot;Variavéis de Ambiente&quot;">​</a></h2><p>Todos os scripts, exceto <code>bin/list-all</code>, terão acesso aos seguintes env vars para agir:</p><ul><li><code>ASDF_INSTALL_TYPE</code> - <code>version</code> ou <code>ref</code></li><li><code>ASDF_INSTALL_VERSION</code> - se <code>ASDF_INSTALL_TYPE</code> é <code>version</code> então este será o número da versão. Caso contrário, será o git ref que será passado. Pode apontar para uma tag/commit/branch no repositório.</li><li><code>ASDF_INSTALL_PATH</code> - o diretório onde <em>foi</em> instalado (ou <em>deve</em> ser instalado no caso do script <code>bin/install</code>)</li></ul><p>Essas variáveis de ambiente adicionais estarão disponíveis para o script <code>bin/install</code>:</p><ul><li><code>ASDF_CONCURRENCY</code> - o número de núcleos a serem usados ao compilar o código-fonte. Útil para definir <code>make -j</code>.</li><li><code>ASDF_DOWNLOAD_PATH</code> - o caminho para onde o código fonte ou binário foi baixado pelo script <code>bin/download</code>.</li></ul><p>Essas variáveis de ambiente adicionais estarão disponíveis para o script <code>bin/download</code>:</p><ul><li><code>ASDF_DOWNLOAD_PATH</code> - o caminho para onde o código-fonte ou binário deve ser baixado.</li></ul><h4 id="bin-list-all" tabindex="-1">bin/list-all <a class="header-anchor" href="#bin-list-all" aria-label="Permalink to &quot;bin/list-all&quot;">​</a></h4><p>Deve imprimir uma string com uma lista de versões separadas por espaço. A saída de exemplo seria a seguinte:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1.0.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1.0.2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1.3.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1.4</span></span></code></pre></div><p>Observe que a versão mais recente deve ser listada por último para que apareça mais próxima do prompt do usuário. Isso é útil já que o comando <code>list-all</code> imprime cada versão em sua própria linha. Se houver muitas versões, é possível que as primeiras versões fiquem fora da tela.</p><p>Se as versões estiverem sendo extraídas da página de lançamentos em um site, é recomendável não classificar as versões, se possível. Muitas vezes as versões já estão na ordem correta ou, na ordem inversa, nesse caso algo como <code>tac</code> deve ser suficiente. Se você precisar classificar as versões manualmente, não poderá confiar em <code>sort -V</code>, pois não é suportado no OSX. Uma função de classificação alternativa <a href="https://github.com/vic/asdf-idris/blob/master/bin/list-all#L6" target="_blank" rel="noreferrer">como esta é uma escolha melhor</a>.</p><h4 id="bin-download" tabindex="-1">bin/download <a class="header-anchor" href="#bin-download" aria-label="Permalink to &quot;bin/download&quot;">​</a></h4><p>Este script deve baixar o código fonte ou binário, no caminho contido na variável de ambiente <code>ASDF_DOWNLOAD_PATH</code>. Se o código-fonte ou binário baixado estiver compactado, apenas o código-fonte ou binário descompactado poderá ser colocado no diretório <code>ASDF_DOWNLOAD_PATH</code>.</p><p>O script deve sair com um status de <code>0</code> quando o download for bem-sucedido. Se o download falhar, o script deve sair com qualquer status de saída diferente de zero.</p><p>Se possível, o script deve apenas colocar arquivos no <code>ASDF_DOWNLOAD_PATH</code>. Se o download falhar, nenhum arquivo deve ser colocado no diretório.</p><p>Se este script não estiver presente, o asdf assumirá que o script <code>bin/install</code> está presente e fará o download e instalará a versão. asdf só funciona sem este script para suportar plugins legados. Todos os plugins devem incluir este script e, eventualmente, o suporte para plugins legados será removido.</p><h4 id="bin-install" tabindex="-1">bin/install <a class="header-anchor" href="#bin-install" aria-label="Permalink to &quot;bin/install&quot;">​</a></h4><p>Este script deve instalar a versão, no caminho mencionado em <code>ASDF_INSTALL_PATH</code>. Por padrão, o asdf criará shims para qualquer arquivo em <code>$ASDF_INSTALL_PATH/bin</code> (isso pode ser personalizado com o script opcional <a href="#binlist-bin-paths">bin/list-bin-paths</a>).</p><p>O script de instalação deve sair com um status de <code>0</code> quando a instalação for bem-sucedida. Se a instalação falhar, o script deve sair com qualquer status de saída diferente de zero.</p><p>Se possível, o script deve apenas colocar os arquivos no diretório <code>ASDF_INSTALL_PATH</code> uma vez que a compilação e instalação da ferramenta são consideradas bem sucedidas pelo script de instalação. asdf <a href="https://github.com/asdf-vm/asdf/blob/242d132afbf710fe3c7ec23c68cec7bdd2c78ab5/lib/utils.sh#L44" target="_blank" rel="noreferrer">verifica a existência</a> do diretório <code>ASDF_INSTALL_PATH</code> para determinar se essa versão da ferramenta está instalado. Se o diretório <code>ASDF_INSTALL_PATH</code> for preenchido no início do processo de instalação, outros comandos asdf executados em outros terminais durante a instalação podem considerar essa versão da ferramenta instalada, mesmo quando não estiver totalmente instalada.</p><p>Se você quiser que seu plugin funcione com asdf versão 0.7._ e anterior e versão 0.8._ e mais recente, verifique a presença da variável de ambiente <code>ASDF_DOWNLOAD_PATH</code>. Se não estiver definido, baixe o código-fonte no retorno de chamada bin/install. Se estiver definido, suponha que o script <code>bin/download</code> já tenha baixado.</p><h2 id="scripts-opcional" tabindex="-1">Scripts Opcional <a class="header-anchor" href="#scripts-opcional" aria-label="Permalink to &quot;Scripts Opcional&quot;">​</a></h2><h4 id="scripts-bin-help" tabindex="-1">scripts bin/help <a class="header-anchor" href="#scripts-bin-help" aria-label="Permalink to &quot;scripts bin/help&quot;">​</a></h4><p>Este não é um script de retorno de chamada, mas sim um conjunto de scripts de retorno de chamada que imprimem documentação diferente para STDOUT. Os scripts de retorno de chamada possíveis estão listados abaixo. Observe que <code>bin/help.overview</code> é um caso especial, pois deve estar presente para que qualquer saída de ajuda seja exibida para o script.</p><ul><li><code>bin/help.overview</code> - Este script deve gerar uma descrição geral sobre o plugin e a ferramenta que está sendo gerenciada. Nenhum título deve ser impresso, pois o asdf imprimirá títulos. A saída pode ser um texto de formato livre, mas idealmente apenas um parágrafo curto. Este script deve estar presente se você quiser que o asdf forneça informações de ajuda para seu plugin. Todos os outros scripts de retorno de chamada de ajuda são opcionais.</li><li><code>bin/help.deps</code> - Esse script deve gerar a lista de dependências adaptadas ao sistema operacional. Uma dependência por linha.</li><li><code>bin/help.config</code> - Este script deve imprimir qualquer configuração obrigatória ou opcional que possa estar disponível para o plug-in e a ferramenta. Quaisquer variáveis de ambiente ou outros sinalizadores necessários para instalar ou compilar a ferramenta (para o sistema operacional dos usuários quando possível). A saída pode ser texto de formato livre.</li><li><code>bin/help.links</code> - Esta deve ser uma lista de links relevantes para o plug-in e a ferramenta (mais uma vez, adaptados ao sistema operacional atual, quando possível). Um link por linha. As linhas podem estar no formato <code>&lt;title&gt;: &lt;link&gt;</code> ou apenas <code>&lt;link&gt;</code>.</li></ul><p>Cada um desses scripts deve adaptar sua saída ao sistema operacional atual. Por exemplo, quando no Ubuntu, o script deps pode gerar as dependências como pacotes apt-get que devem ser instalados. O script também deve adaptar sua saída ao valor de <code>ASDF_INSTALL_VERSION</code> e <code>ASDF_INSTALL_TYPE</code> quando as variáveis forem definidas. Eles são opcionais e nem sempre serão definidos.</p><p>O script de retorno de chamada de ajuda NÃO DEVE gerar nenhuma informação que já esteja coberta na documentação principal do asdf-vm. As informações gerais de uso do asdf não devem estar presentes.</p><h4 id="bin-list-bin-paths" tabindex="-1">bin/list-bin-paths <a class="header-anchor" href="#bin-list-bin-paths" aria-label="Permalink to &quot;bin/list-bin-paths&quot;">​</a></h4><p>Liste os executáveis para a versão especificada da ferramenta. Deve imprimir uma string com uma lista separada por espaços de caminhos de diretórios que contêm executáveis. Os caminhos devem ser relativos ao caminho de instalação passado. A saída de exemplo seria:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tools</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> veggies</span></span></code></pre></div><p>Isso instruirá o asdf a criar shims para os arquivos em <code>&lt;install-path&gt;/bin</code>, <code>&lt;install-path&gt;/tools</code> e <code>&lt;install-path&gt;/veggies</code></p><p>Se este script não for especificado, o asdf procurará o diretório <code>bin</code> em uma instalação e criará shims para eles.</p><h4 id="bin-exec-env" tabindex="-1">bin/exec-env <a class="header-anchor" href="#bin-exec-env" aria-label="Permalink to &quot;bin/exec-env&quot;">​</a></h4><p>Configure o env para executar os binários no pacote.</p><h4 id="bin-exec-path" tabindex="-1">bin/exec-path <a class="header-anchor" href="#bin-exec-path" aria-label="Permalink to &quot;bin/exec-path&quot;">​</a></h4><p>Obtenha o caminho executável para a versão especificada da ferramenta. Deve imprimir uma string com o caminho executável relativo. Isso permite que o plug-in substitua condicionalmente o caminho executável especificado do shim, caso contrário, retorne o caminho padrão especificado pelo shim.</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Usage:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  plugin/bin/exec-path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">install-pat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">h</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">comman</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">executable-pat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">h</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Example</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Call:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  ~/.asdf/plugins/foo/bin/exec-path</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;~/.asdf/installs/foo/1.0&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;foo&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;bin/foo&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Output:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  bin/foox</span></span></code></pre></div><h4 id="bin-uninstall" tabindex="-1">bin/uninstall <a class="header-anchor" href="#bin-uninstall" aria-label="Permalink to &quot;bin/uninstall&quot;">​</a></h4><p>Desinstala uma versão específica de uma ferramenta.</p><h4 id="bin-list-legacy-filenames" tabindex="-1">bin/list-legacy-filenames <a class="header-anchor" href="#bin-list-legacy-filenames" aria-label="Permalink to &quot;bin/list-legacy-filenames&quot;">​</a></h4><p>Registre arquivos setter adicionais para este plugin. Deve imprimir uma string com uma lista de nomes de arquivos separados por espaços.</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.ruby-version</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .rvmrc</span></span></code></pre></div><p>Nota: Isso só se aplica a usuários que habilitaram a opção <code>legacy_version_file</code> em seu <code>~/.asdfrc</code>.</p><h4 id="bin-parse-legacy-file" tabindex="-1">bin/parse-legacy-file <a class="header-anchor" href="#bin-parse-legacy-file" aria-label="Permalink to &quot;bin/parse-legacy-file&quot;">​</a></h4><p>Isso pode ser usado para analisar ainda mais o arquivo legado encontrado pelo asdf. Se o <code>parse-legacy-file</code> não for implementado, o asdf simplesmente irá cat o arquivo para determinar a versão. O script receberá o caminho do arquivo como seu primeiro argumento.</p><h4 id="bin-post-plugin-add" tabindex="-1">bin/post-plugin-add <a class="header-anchor" href="#bin-post-plugin-add" aria-label="Permalink to &quot;bin/post-plugin-add&quot;">​</a></h4><p>Isso pode ser usado para executar qualquer ação pós-instalação depois que o plug-in for adicionado ao asdf.</p><p>O script tem acesso ao caminho em que o plugin foi instalado (<code>\${ASDF_PLUGIN_PATH}</code>) e o URL de origem (<code>\${ASDF_PLUGIN_SOURCE_URL}</code>), se algum foi usado.</p><p>Veja também os ganchos relacionados:</p><ul><li><code>pre_asdf_plugin_add</code></li><li><code>pre_asdf_plugin_add_\${plugin_name}</code></li><li><code>post_asdf_plugin_add</code></li><li><code>post_asdf_plugin_add_\${plugin_name}</code></li></ul><h4 id="bin-pre-plugin-remove" tabindex="-1">bin/pre-plugin-remove <a class="header-anchor" href="#bin-pre-plugin-remove" aria-label="Permalink to &quot;bin/pre-plugin-remove&quot;">​</a></h4><p>Isso pode ser usado para executar qualquer ação de pré-remoção antes que o plug-in seja removido do asdf.</p><p>O script tem acesso ao caminho em que o plugin foi instalado (<code>\${ASDF_PLUGIN_PATH}</code>).</p><p>Veja também os ganchos relacionados:</p><ul><li><code>pre_asdf_plugin_remove</code></li><li><code>pre_asdf_plugin_remove_\${plugin_name}</code></li><li><code>post_asdf_plugin_remove</code></li><li><code>post_asdf_plugin_remove_\${plugin_name}</code></li></ul><h2 id="comandos-de-extensao-para-asdf-cli" tabindex="-1">Comandos de extensão para asdf CLI. <a class="header-anchor" href="#comandos-de-extensao-para-asdf-cli" aria-label="Permalink to &quot;Comandos de extensão para asdf CLI.&quot;">​</a></h2><p>É possível que plugins definam novos comandos asdf fornecendo scripts ou executáveis <code>lib/commands/command*.bash</code> que será chamado usando a interface de linha de comando asdf usando o nome do plug-in como um subcomando.</p><p>Por exemplo, suponha que um plugin <code>foo</code> tenha:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">foo/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  lib/commands/</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    command</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.bash</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    command-bat.bash</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    command-bat-man.bash</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    command-help.bash</span></span></code></pre></div><p>Os usuários agora podem executar</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> asdf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> foo</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         # same as running \`$ASDF_DATA_DIR/plugins/foo/lib/commands/command.bash\`</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> asdf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> foo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bar</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # same as running \`$ASDF_DATA_DIR/plugins/foo/lib/commands/command.bash bar\`</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> asdf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> foo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> help</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # same as running \`$ASDF_DATA_DIR/plugins/foo/lib/commands/command-help.bash\`</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> asdf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> foo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> man</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # same as running \`$ASDF_DATA_DIR/plugins/foo/lib/commands/command-bat-man.bash\`</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> asdf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> foo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> baz</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # same as running \`$ASDF_DATA_DIR/plugins/foo/lib/commands/command-bat.bash baz\`</span></span></code></pre></div><p>Os autores de plugins podem usar esse recurso para fornecer utilitários relacionados às suas ferramentas, ou até mesmo criar plugins que são apenas novas extensões de comando para o próprio asdf.</p><p>Quando invocados, se os comandos de extensão não tiverem seus bits executáveis definidos, eles serão originado como scripts bash, tendo todas as funções de <code>$ASDF_DIR/lib/utils.bash</code> disponíveis. Além disso, o <code>$ASDF_CMD_FILE</code> resolve para o caminho completo do arquivo que está sendo originado. Se o bit executável estiver definido, eles são apenas executados e substituem a execução do asdf.</p><p>Um bom exemplo desse recurso é para plugins como <a href="https://github.com/asdf-community/asdf-haxe" target="_blank" rel="noreferrer"><code>haxe</code></a> que fornece o <code>asdf haxe neko-dylibs-link</code> para corrigir um problema onde os executáveis haxe esperam encontrar bibliotecas dinâmicas relativas ao diretório executável.</p><p>Se o seu plug-in fornecer um comando de extensão asdf, certifique-se de mencioná-lo no README do seu plug-in.</p><h2 id="modelos-de-calcos-personalizados" tabindex="-1">Modelos de calços personalizados <a class="header-anchor" href="#modelos-de-calcos-personalizados" aria-label="Permalink to &quot;Modelos de calços personalizados&quot;">​</a></h2><p><strong>POR FAVOR, use este recurso apenas se for absolutamente necessário</strong></p><p>asdf permite modelos de calços personalizados. Para um executável chamado <code>foo</code>, se houver um arquivo <code>shims/foo</code> no plug-in, o asdf copiará esse arquivo em vez de usar seu modelo padrão de shim.</p><p>Isso deve ser usado com sabedoria. Por enquanto AFAIK, está sendo usado apenas no plugin Elixir, porque um executável também é lido como um arquivo Elixir, além de ser apenas um executável. O que torna impossível usar o calço bash padrão.</p><h2 id="testando-plug-ins" tabindex="-1">Testando plug-ins <a class="header-anchor" href="#testando-plug-ins" aria-label="Permalink to &quot;Testando plug-ins&quot;">​</a></h2><p><code>asdf</code> contém o comando <code>plugin-test</code> para testar seu plugin. Você pode usá-lo da seguinte forma</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">asdf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> plugin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">plugin-nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">plugin-ur</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">l</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [--asdf-tool-version </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">versio</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [--asdf-plugin-gitref </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">git-re</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">f</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [test-command*]</span></span></code></pre></div><p>Apenas os dois primeiros argumentos são necessários. Se _<em>version</em> for especificado, a ferramenta será instalada com essa versão específica. O padrão é o que retorna <code>asdf latest &lt;plugin-name&gt;</code>. Se <em>git-ref</em> for especificado, o plug-in em si é verificado nesse commit/branch/tag, útil para testar um pull-request no CI do seu plug-in. O padrão é o branch <em>default</em> do repositório do plugin.</p><p>Os argumentos Rest são considerados o comando a ser executado para garantir que a ferramenta instalada funcione corretamente. Normalmente seria algo que leva <code>--version</code> ou <code>--help</code>. Por exemplo, para testar o plugin NodeJS, podemos executar</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">asdf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> plugin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nodejs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/asdf-vm/asdf-nodejs.git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --version</span></span></code></pre></div><p>É altamente recomendável que você teste seu plug-in em um ambiente CI e verifique se ele funciona no Linux e no OSX.</p><h4 id="exemplo-github-action" tabindex="-1">Exemplo GitHub Action <a class="header-anchor" href="#exemplo-github-action" aria-label="Permalink to &quot;Exemplo GitHub Action&quot;">​</a></h4><p>O repositório <a href="https://github.com/asdf-vm/actions" target="_blank" rel="noreferrer">asdf-vm/actions</a> fornece uma ação do GitHub para testar seus plugins hospedados no github.</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">steps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">asdf_plugin_test</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">asdf-vm/actions/plugin-test@v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;my_tool --version&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    env</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      GITHUB_API_TOKEN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${{ secrets.GITHUB_TOKEN }}</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # automatically provided</span></span></code></pre></div><h4 id="exemplo-de-configuracao-do-travisci" tabindex="-1">Exemplo de configuração do TravisCI <a class="header-anchor" href="#exemplo-de-configuracao-do-travisci" aria-label="Permalink to &quot;Exemplo de configuração do TravisCI&quot;">​</a></h4><p>Aqui está um arquivo <code>.travis.yml</code> de amostra, personalize-o de acordo com suas necessidades</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">language</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">c</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">asdf plugin test nodejs $TRAVIS_BUILD_DIR &#39;node --version&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">before_script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">git clone https://github.com/asdf-vm/asdf.git asdf</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">. asdf/asdf.sh</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">os</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">linux</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">osx</span></span></code></pre></div><p>Notas: Ao usar outro IC, você precisará verificar qual variável mapeia para o caminho do repositório.</p><p>Você também tem a opção de passar um caminho relativo para <code>plugin-test</code>.</p><p>Por exemplo, se o script de teste for executado no diretório: <code>asdf plugin test nodejs . &#39;node --version&#39;</code>.</p><h2 id="limitacao-de-taxa-da-api-do-github" tabindex="-1">Limitação de taxa da API do GitHub <a class="header-anchor" href="#limitacao-de-taxa-da-api-do-github" aria-label="Permalink to &quot;Limitação de taxa da API do GitHub&quot;">​</a></h2><p>Se o <code>list-all</code> do seu plug-in depender do acesso à API do GitHub, certifique-se de fornecer um token de autorização ao acessá-lo, caso contrário, seus testes podem falhar devido à limitação de taxa.</p><p>Para fazer isso, crie um <a href="https://github.com/settings/tokens/new" target="_blank" rel="noreferrer">novo token pessoal</a> com apenas acesso <code>public_repo</code>.</p><p>Em seguida, nas configurações de compilação do travis.ci, adicione uma variável de ambiente <em>secure</em> para ela chamada algo como <code>GITHUB_API_TOKEN</code>. E <em>NUNCA</em> publique seu token em seu código.</p><p>Finalmente, adicione algo como o seguinte para <code>bin/list-all</code></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cmd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;curl -s&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$GITHUB_API_TOKEN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">then</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cmd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$cmd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -H &#39;Authorization: token </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$GITHUB_API_TOKEN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cmd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$cmd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $releases_path</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span></code></pre></div><h2 id="enviando-plugins-para-o-repositorio-oficial-de-plugins" tabindex="-1">Enviando plugins para o repositório oficial de plugins <a class="header-anchor" href="#enviando-plugins-para-o-repositorio-oficial-de-plugins" aria-label="Permalink to &quot;Enviando plugins para o repositório oficial de plugins&quot;">​</a></h2><p><code>asdf</code> pode facilmente instalar plugins especificando o url do repositório de plugins, por exemplo. <code>plugin add my-plugin https://github.com/user/asdf-my-plugin.git</code>.</p><p>Para facilitar para seus usuários, você pode adicionar seu plugin ao repositório oficial de plugins para ter seu plugin listado e facilmente instalável usando um comando mais curto, por exemplo <code>asdf plugin add my-plugin</code>.</p><p>Siga as instruções no repositório de plugins: <a href="https://github.com/asdf-vm/asdf-plugins" target="_blank" rel="noreferrer">asdf-vm/asdf-plugins</a>.</p>`,102)]))}const k=s(n,[["render",t]]);export{u as __pageData,k as default};
